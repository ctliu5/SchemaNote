function fuzzy(n,t){return n.indexOf(t)>-1}function exact(n,t){return n===t}function SetIndex(){CurrentIndex=this.value;Iterator()}function SetMethod(){switch(this.value){case"fuzzy":CompareMethod=fuzzy;break;case"exact":CompareMethod=exact;break;default:CompareMethod=fuzzy}Iterator()}function initialOption(){var u,r,t,f,n,i,e,o,s;for(Iterator=Iterator_jQuery,$('[data-toggle="tooltip"]').tooltip(),u=0,r=document.getElementById("choose"),r.addEventListener("change",SetIndex,!1),t=0,f=Overview.length;t<f;t++)n=Overview[t],++u==1&&(CurrentIndex=n),Overview.hasOwnProperty(n)&&(i=document.createElement("option"),e=document.createTextNode(Overview[n].name_cht),i.appendChild(e),i.setAttribute("value",n),r.appendChild(i));o=document.getElementById("switch");o.addEventListener("change",SetMethod,!1);s=document.getElementById("SearchTextBox");s.addEventListener("keyup",Iterator,!1)}function testIterator(){function t(n,t){var r=Date.now(),i;for(CurrentIndex=t,i=300;i>0;i--)n();console.log(n.name+" spend time:"+(Date.now()-r))}var i,r,n;for(SearchTextBox.value="TBL",i=0,r=Overview.length;i<r;i++)n=Overview[i],Overview.hasOwnProperty(n)&&(t(Iterator_jQuery,n),t(Iterator_js_querySelector,n),t(Iterator_js_ClassName,n),t(Iterator_js_JsonObj,n),console.log("================================"))}function Iterator_jQuery(){var i=typeof SearchTextBox.value=="string"?SearchTextBox.value.trim():"",f="."+CurrentIndex,t,u,n,r;if(i=i.toUpperCase(),t=$(".accordion"),i)for(n=0,r=t.length;n<r;n++)u=!0,$(t[n]).find(f).each(function(){var r=$(this).text();if(r){if(CompareMethod(r.trim().toUpperCase(),i))return $(t[n]).css("display","initial"),u=!1,!1}else console.log($(this))}),u&&$(t[n]).css("display","none");else for(n=0,r=t.length;n<r;n++)$(t[n]).css("display","initial")}function Iterator_js_querySelector(){var i=typeof SearchTextBox.value=="string"?SearchTextBox.value.trim():"",h="."+CurrentIndex,t,o,u,f,s,e,n,r;if(i=i.toUpperCase(),t=document.querySelectorAll(".accordion"),i)for(n=0,r=t.length;n<r;n++){for(o=!0,u=t[n].querySelectorAll(h),f=0,s=u.length;f<s;f++)if(e=u[f],e.textContent){if(CompareMethod(e.textContent.trim().toUpperCase(),i)){t[n].style.cssText="display:initial;";o=!1;break}}else console.log(u),console.log(e);o&&(t[n].style.cssText="display:none;")}else for(n=0,r=t.length;n<r;n++)t[n].style.cssText="display:initial;"}function Iterator_js_ClassName(){var i=typeof SearchTextBox.value=="string"?SearchTextBox.value.trim():"",t,u,f,e,o,n,r;if(i=i.toUpperCase(),t=document.getElementsByClassName("accordion"),i)for(n=0,r=t.length;n<r;n++){for(u=!0,f=t[n].getElementsByClassName(CurrentIndex),e=0,o=f.length;e<o;e++)if(ele.textContent){if(CompareMethod(ele.textContent.trim().toUpperCase(),i)){t[n].style.cssText="display:initial;";u=!1;break}}else console.log(f),console.log(ele);u&&(t[n].style.cssText="display:none;")}else for(n=0,r=t.length;n<r;n++)t[n].style.cssText="display:initial;"}function Iterator_js_JsonObj(){var n=typeof SearchTextBox.value=="string"?SearchTextBox.value.trim():"",t;n=n.toUpperCase();n?ForeachObj(Overview[CurrentIndex].json,function(i,r){var u,f,e;for(t=!0,u=i[r],f=0,e=u.length;t&&f<e;f++)u[f]?CompareMethod(u[f],n)&&(document.getElementById(r).style.cssText="display:initial;",t=!1):(console.log(u),console.log(u[f]));t&&(document.getElementById(r).style.cssText="display:none;")}):ForeachObj(Overview[CurrentIndex].json,function(n,t){document.getElementById(t).style.cssText="display:initial;"})}function ForeachObj(n,t){for(var i in n)n.hasOwnProperty(i)&&t(n,i)}function changeElement(){var n;this.removeEventListener("dblclick",changeElement,!1);var i=this.dataset.column_id,r=this.dataset.field,t="";switch(r){case"REMARK":t="textarea";break;default:t="input"}for(n=document.createElement(t),n.name=(i>0?"["+i+"].":"[0].")+r,n.value=this.dataset.content,n.setAttribute("class",this.dataset.class+" NoteController"),t==="textarea"&&n.setAttribute("rows",3);this.firstChild;)this.removeChild(this.firstChild);this.insertBefore(n,this.childNodes[0]);n.select();document.getElementById("submit").style.cssText="display:initial;"}function ExportExtendedPropScript(){$.ajax({url:"/Home/ExportExtendedPropScript",type:"POST",dataType:"text",contentType:"text/plain;charset=UTF-8",success:function(n){download("ExtendedPropScript_urlencoded_"+Date.now()+".sql",n)},error:function(){}})}function download(n,t){t="ï»¿"+t;var r=new Blob([t],{type:"text/plain;charset=UTF-8"}),u=window.URL.createObjectURL(r),i=document.createElement("a");i.setAttribute("href",u);i.setAttribute("download",n);i.style.display="none";document.body.appendChild(i);i.click();document.body.removeChild(i)}var Overview={},CurrentIndex,CompareMethod=fuzzy,Iterator,SearchTextBox=document.getElementById("SearchTextBox");